@model ADJ.BusinessService.Dtos.OrderDTO;

<form asp-action="Create" asp-controller="PurchaseOrder" id="orderForm">
  <input asp-for="Method" value=@Model.Method type="hidden" />
  <input asp-for="Id" value=@Model.Id type="hidden" />
  <input asp-for="RowVersion" value=@Model.RowVersion type="hidden" />
  <input asp-for="SingleOrderDetail.Id" value=@Model.SingleOrderDetail.Id type="hidden" />

  <div class="uk-grid uk-card uk-card-default uk-card-body">
    <h4><a href="/Home" class="uk-link-text">Dashboard</a> > Order > <a href="/Order/Display" class="uk-link-text">PO Manager</a> > <a href="./@(Model.Method.Substring(0,Model.Method.IndexOf(" ")))?ponumber=@(Model.Method.Substring(Model.Method.LastIndexOf(":")+2))" class="uk-link-text">@Model.Method</a></h4>
  </div>

  <br />
  <div class="uk-card uk-card-default uk-card-body">
    @{
      bool progressChecked = false;
      foreach (var item in Model.PODetails.Items)
      {
        if ((decimal)item.Quantity == item.ReviseQuantity)
        {
          progressChecked = true;
          break;
        }
      }
      if (progressChecked)
      {
        <div style="text-align: right">
          <table id="orderTable" class="uk-table uk-table-small uk-table-middle" style="table-layout: fixed; text-align: left;">
            <tr>
              <td style="text-align: right">
                <button type="submit" asp-action="Apply" asp-controller="PurchaseOrder" value="Apply" class="uk-button uk-button-primary" id="applyButton">Apply</button>
              </td>
            </tr>
          </table>
        </div>
        <partial name="_Order_ReadOnly" model="Model" />
      }
      else
      {
        <partial name="_Order" model="Model" />
      }
    }
  </div>

  <br />

  <div class="uk-card uk-card-default uk-card-body" id="orderDetailPartial">
    <partial name="_OrderDetail" model="Model" />
  </div>

  <br />

  <div class="uk-card uk-card-default uk-card-body">
    <a class="uk-link-text" asp-controller="Order" asp-action="Display">Back to List</a>
  </div>

</form>

@section Scripts
  {
  <script type="text/javascript" src="@Url.Content("~/js/PurchaseOrder.js")"></script>
}
